// –í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞
import { type SQLiteDatabase } from 'expo-sqlite';

export const DatabaseService = {
    // –£–±–∏—Ä–∞–µ–º getDb() –≤–Ω—É—Ç—Ä–∏ init, —Ç–∞–∫ –∫–∞–∫ db –ø—Ä–∏–¥–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º
    async init(db: SQLiteDatabase) {
        console.log('üöÄ Init started inside Provider...');

        // 1. –°–Ω–∞—á–∞–ª–∞ –∫–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª (–¢–æ—Ç —Å–∞–º—ã–π –∫–æ–¥ —Å FileSystem)
        // –í–ê–ñ–ù–û: –¢—É—Ç –º—ã –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –∑–∞–≤–∏—Å–∏–º –æ—Ç FileSystem.
        // –ï—Å–ª–∏ –æ–Ω –≤—Å—ë –µ—â–µ null, –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ 100% –≤ metro.config –∏–ª–∏ .expo –ø–∞–ø–∫–µ.

        const fs = require('expo-file-system'); // –ü–æ–ø—Ä–æ–±—É–π require –≤–º–µ—Å—Ç–æ import
        const assetModule = require('expo-asset');

        // ... –¢–í–û–ô –ö–û–î –ö–û–ü–ò–†–û–í–ê–ù–ò–Ø (—Å try/catch –∏ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—É—Ç–µ–π) ...
        // ... –ù–û —É–±–µ—Ä–∏ —Å—Ç—Ä–æ–∫—É const db = await this.getDb(); ...

        // 2. –ú–∏–≥—Ä–∞—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π db)
        await db.execAsync(`PRAGMA journal_mode = WAL;`);
        // ... —Ç–≤–æ–∏ create table ...
        console.log('‚úÖ Init finished');
    },

    // –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã (getSessionWords) –æ—Å—Ç–∞—é—Ç—Å—è, –Ω–æ —Ç–µ–ø–µ—Ä—å –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã
    // –ø–æ–ª—É—á–∞—Ç—å db —á–µ—Ä–µ–∑ —Ö—É–∫ useSQLiteContext() –í–ù–£–¢–†–ò –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤,
    // –ª–∏–±–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–Ω–Ω–µ–∫—Ü–∏—é.
    // –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –ø–æ–∫–∞ –æ—Å—Ç–∞–≤—å –∫–∞–∫ –µ—Å—Ç—å, –Ω–æ –≤ –±—É–¥—É—â–µ–º –ª—É—á—à–µ –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å –Ω–∞ —Ö—É–∫.
};